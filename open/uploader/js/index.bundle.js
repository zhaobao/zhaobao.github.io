!function(e){function t(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.charset="utf-8",n.src=p.p+""+e+"."+b+".hot-update.js",t.appendChild(n)}function n(e){if("undefined"==typeof XMLHttpRequest)return e(new Error("No browser support"));try{var t=new XMLHttpRequest,n=p.p+""+b+".hot-update.json";t.open("GET",n,!0),t.timeout=1e4,t.send(null)}catch(i){return e(i)}t.onreadystatechange=function(){if(4===t.readyState)if(0===t.status)e(new Error("Manifest request to "+n+" timed out."));else if(404===t.status)e();else if(200!==t.status&&304!==t.status)e(new Error("Manifest request to "+n+" failed."));else{try{var i=JSON.parse(t.responseText)}catch(r){return void e(r)}e(null,i)}}}function i(e){function t(e,t){"ready"===P&&o("prepare"),E++,p.e(e,function(){function n(){E--,"prepare"===P&&(H[e]||c(e),0===E&&0===S&&u())}try{t.call(null,i)}finally{n()}})}var n=L[e];if(!n)return p;var i=function(t){return n.hot.active?L[t]?(L[t].parents.indexOf(e)<0&&L[t].parents.push(e),n.children.indexOf(t)<0&&n.children.push(t)):O=[e]:(console.warn("[HMR] unexpected require("+t+") from disposed module "+e),O=[]),p(t)};for(var r in p)Object.prototype.hasOwnProperty.call(p,r)&&(h?Object.defineProperty(i,r,function(e){return{configurable:!0,enumerable:!0,get:function(){return p[e]},set:function(t){p[e]=t}}}(r)):i[r]=p[r]);return h?Object.defineProperty(i,"e",{enumerable:!0,value:t}):i.e=t,i}function r(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],active:!0,accept:function(e,n){if("undefined"==typeof e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var i=0;i<e.length;i++)t._acceptedDependencies[e[i]]=n;else t._acceptedDependencies[e]=n},decline:function(e){if("undefined"==typeof e)t._selfDeclined=!0;else if("number"==typeof e)t._declinedDependencies[e]=!0;else for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:a,apply:d,status:function(e){return e?void $.push(e):P},addStatusHandler:function(e){$.push(e)},removeStatusHandler:function(e){var t=$.indexOf(e);t>=0&&$.splice(t,1)},data:w[e]};return t}function o(e){P=e;for(var t=0;t<$.length;t++)$[t].call(null,e)}function s(e){var t=+e+""===e;return t?+e:e}function a(e,t){if("idle"!==P)throw new Error("check() is only allowed in idle status");"function"==typeof e?(g=!1,t=e):(g=e,t=t||function(e){if(e)throw e}),o("check"),n(function(e,n){if(e)return t(e);if(!n)return o("idle"),void t(null,null);k={},x={},H={};for(var i=0;i<n.c.length;i++)x[n.c[i]]=!0;m=n.h,o("prepare"),v=t,y={};var r=0;c(r),"prepare"===P&&0===E&&0===S&&u()})}function l(e,t){if(x[e]&&k[e]){k[e]=!1;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(y[n]=t[n]);0===--S&&0===E&&u()}}function c(e){x[e]?(k[e]=!0,S++,t(e)):H[e]=!0}function u(){o("ready");var e=v;if(v=null,e)if(g)d(g,e);else{var t=[];for(var n in y)Object.prototype.hasOwnProperty.call(y,n)&&t.push(s(n));e(null,t)}}function d(t,n){function i(e){for(var t=[e],n={},i=t.slice();i.length>0;){var o=i.pop(),e=L[o];if(e&&!e.hot._selfAccepted){if(e.hot._selfDeclined)return new Error("Aborted because of self decline: "+o);if(0===o)return;for(var s=0;s<e.parents.length;s++){var a=e.parents[s],l=L[a];if(l.hot._declinedDependencies[o])return new Error("Aborted because of declined dependency: "+o+" in "+a);t.indexOf(a)>=0||(l.hot._acceptedDependencies[o]?(n[a]||(n[a]=[]),r(n[a],[o])):(delete n[a],t.push(a),i.push(a)))}}}return[t,n]}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];e.indexOf(i)<0&&e.push(i)}}if("ready"!==P)throw new Error("apply() is only allowed in ready status");"function"==typeof t?(n=t,t={}):t&&"object"==typeof t?n=n||function(e){if(e)throw e}:(t={},n=n||function(e){if(e)throw e});var a={},l=[],c={};for(var u in y)if(Object.prototype.hasOwnProperty.call(y,u)){var d=s(u),f=i(d);if(!f){if(t.ignoreUnaccepted)continue;return o("abort"),n(new Error("Aborted because "+d+" is not accepted"))}if(f instanceof Error)return o("abort"),n(f);c[d]=y[d],r(l,f[0]);for(var d in f[1])Object.prototype.hasOwnProperty.call(f[1],d)&&(a[d]||(a[d]=[]),r(a[d],f[1][d]))}for(var h=[],_=0;_<l.length;_++){var d=l[_];L[d]&&L[d].hot._selfAccepted&&h.push({module:d,errorHandler:L[d].hot._selfAccepted})}o("dispose");for(var v=l.slice();v.length>0;){var d=v.pop(),g=L[d];if(g){for(var $={},S=g.hot._disposeHandlers,E=0;E<S.length;E++){var H=S[E];H($)}w[d]=$,g.hot.active=!1,delete L[d];for(var E=0;E<g.children.length;E++){var k=L[g.children[E]];if(k){var x=k.parents.indexOf(d);x>=0&&k.parents.splice(x,1)}}}}for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d))for(var g=L[d],j=a[d],E=0;E<j.length;E++){var q=j[E],x=g.children.indexOf(q);x>=0&&g.children.splice(x,1)}o("apply"),b=m;for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(e[d]=c[d]);var D=null;for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d)){for(var g=L[d],j=a[d],U=[],_=0;_<j.length;_++){var q=j[_],H=g.hot._acceptedDependencies[q];U.indexOf(H)>=0||U.push(H)}for(var _=0;_<U.length;_++){var H=U[_];try{H(a)}catch(A){D||(D=A)}}}for(var _=0;_<h.length;_++){var C=h[_],d=C.module;O=[d];try{p(d)}catch(A){if("function"==typeof C.errorHandler)try{C.errorHandler(A)}catch(A){D||(D=A)}else D||(D=A)}}return D?(o("fail"),n(D)):(o("idle"),void n(null,l))}function p(t){if(L[t])return L[t].exports;var n=L[t]={exports:{},id:t,loaded:!1,hot:r(t),parents:O,children:[]};return e[t].call(n.exports,n,n.exports,i(t)),n.loaded=!0,n.exports}var f=this.webpackHotUpdate;this.webpackHotUpdate=function(e,t){l(e,t),f&&f(e,t)};var h=!1;try{Object.defineProperty({},"x",{get:function(){}}),h=!0}catch(_){}var v,y,m,g=!0,b="724579c3ca93c862b501",w={},O=[],$=[],P="idle",S=0,E=0,H={},k={},x={},L={};return p.m=e,p.c=L,p.p="",p.h=function(){return b},i(0)(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";var i=n(2);new i(".upload-container",{url:"http://127.0.0.1:9999",data:{},multiple:!0,onprepare:function(){console.log(arguments)},onsuccess:function(){console.log(arguments)},onerror:function(){console.log(arguments)}})["do"]()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(3);var s=1,a=2,l=3,c=4,u=function h(e){i(this,h),this.url=e.hasOwnProperty("url")?e.url:"",this.accept=e.hasOwnProperty("accept")?e.accept:"*/*",this.multiple=e.hasOwnProperty("multiple")?"multiple":"",this.data=e.hasOwnProperty("data")?e.data:{},this.onprepare=e.hasOwnProperty("onprepare")?e.onprepare:function(){},this.onsuccess=e.hasOwnProperty("onsuccess")?e.onsuccess:function(){},this.onerror=e.hasOwnProperty("onerror")?e.onerror:function(){}},d=function(){function e(){i(this,e)}return o(e,null,[{key:"getSuffix",value:function(e){return""!==e.type?e.type.split("/")[1].toUpperCase().substr(0,4):e.name.lastIndexOf(".")>=0?e.name.substring(e.name.lastIndexOf(".")+1).toUpperCase().substr(0,4):void 0}},{key:"isEmptyObject",value:function(e){if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;if("object"!==("undefined"==typeof e?"undefined":r(e)))return!0;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"getUuid",value:function(){return++e.uuid}}]),e}();d.uuid=0;var p=function(){function e(){i(this,e)}return o(e,null,[{key:"getContainer",value:function(){return'\n            <div class="upload">\n                <div class="upload__header">\n                    <div class="upload__title">FILE UPLOAD</div>\n                    <div class="upload__close"><div class="upload-close"></div></div>\n                </div>\n                <div class="upload__body"></div>\n                <div class="upload__footer">\n                    <div class="upload__drag">\n                        <div class="upload__area">\n                            <!--<span>Drag files here or</span>-->\n                            <span class="upload-area__browse">Click to browse</span>\n                        </div>\n                    </div>\n                    <div class="upload__do disable"><div class="upload-icon"></div></div>\n                </div>\n                <div class="upload__form hide"></div>\n            </div>'}},{key:"getItem",value:function(e,t,n,i){var r=document.createElement("div");return r.classList.add("upload-item"),r.classList.add("upload-item-"+i),r.innerHTML='\n            <div class="upload-item__icon">'+e+'</div>\n            <div class="upload-item__body">\n                <div class="upload-item__info">\n                    <div class="upload-item__name">'+t+'</div>\n                    <div class="upload-item__status">'+n+'</div>\n                    <div class="upload-item__result" data-target="'+i+'">\n                        <div class="upload-close"></div>\n                    </div>\n                </div>\n                <div class="upload-item__pg">\n                    <div class="upload-item-pg-bg"></div>\n                    <div class="upload-item-pg-hl"></div>\n                </div>\n            </div>',r}},{key:"getHiddenForm",value:function(e,t){return'<input type="file" accept="'+e+'" class="upload__input" '+t+"/>"}}]),e}(),f=function(){function e(t,n){i(this,e),this.$container="string"==typeof t?document.querySelector(t):t,this._options=new u(n),this.__files={}}return o(e,[{key:"do",value:function(){return this.$container.style.minHeight="160px",this.$container.innerHTML=p.getContainer(),this.$upload=this.$container.querySelector(".upload"),this.$form=this.$upload.querySelector(".upload__form"),this.$form.innerHTML=p.getHiddenForm(this._options.accept,this._options.multiple),this.__cacheSelector(),this.__bindEvent(),this}},{key:"__cacheSelector",value:function(){this.$body=this.$upload.querySelector(".upload__body"),this.$close=this.$upload.querySelector(".upload__close"),this.$closeIcon=this.$upload.querySelector(".upload-close"),this.$drag=this.$upload.querySelector(".upload__drag"),this.$do=this.$upload.querySelector(".upload__do"),this.$input=this.$upload.querySelector(".upload__input")}},{key:"__bindEvent",value:function(){this.$close.addEventListener("click",function(){this.$container.parentNode.removeChild(this.$container)}.bind(this),!1),this.$closeIcon.addEventListener("click",function(){this.$container.parentNode.removeChild(this.$container)}.bind(this),!1),this.$drag.addEventListener("click",function(){this.$input.click()}.bind(this),!1),this.$input.addEventListener("change",function(e){this.__generateItem(e.target.files),e.target.value=""}.bind(this),!1),this.$do.addEventListener("click",function(e){d.isEmptyObject(this.__files)||this.__doUpload()}.bind(this),!1),this.$body.addEventListener("click",function(e){console.log(this.__files),console.log(e.target);var t=null;if(e.target.classList.contains("upload-close")&&(t=e.target.parentNode),e.target.classList.contains("upload-item__result")&&(t=e.target),null!==t){var n=t.getAttribute("data-target");this.__files.hasOwnProperty("item-"+n)&&delete this.__files["item-"+n],d.isEmptyObject(this.__files)&&this.__toggleUploadBtn(!1),this.$body.removeChild(document.querySelector(".upload-item-"+n))}}.bind(this),!1)}},{key:"__generateItem",value:function(e){if(0!==e.length){this.__toggleUploadBtn(!0);for(var t=0,n=e.length;t<n;t++){var i=e[t],r=d.getUuid();this.$body.appendChild(p.getItem(d.getSuffix(i),i.name,i.size,r)),this.__files["item-"+r]={status:s,file:i,container:document.querySelector(".upload-item-"+r)}}}}},{key:"__doUpload",value:function(){var e=this,t=function(t){if(!e.__files.hasOwnProperty(t))return"continue";if(e._options.hasOwnProperty("onprepare")&&"function"==typeof e._options.onprepare&&e._options.onprepare(e.__files[t]),e.__files[t].status!==s)return"continue";e.__files[t].status=a;var n=new XMLHttpRequest,i=new FormData,r=e.__files[t].container.querySelector(".upload-item-pg-hl"),o=e.__files[t].container.querySelector(".upload-item__status"),u=e.__files[t].container.querySelector(".upload-item__result").getAttribute("data-target");if(n.upload.addEventListener("progress",function(e){if(e.lengthComputable){var n=this.__files[t].file.size,i=e.loaded;i>n&&(i=n);var s=Math.round(100*i/n);r.style.width=s+"%",o.innerHTML=i+" / "+n}else r.classList.add("unknown")}.bind(e),!1),n.upload.addEventListener("load",function(){r.style.width="100%"},!1),n.onreadystatechange=function(){4==n.readyState&&(200==n.status?(this.__files[t].status=l,o.innerHTML="success",o.classList.add("upload-item__status-success"),delete this.__files["item-"+u],this._options.hasOwnProperty("onsuccess")&&"function"==typeof this._options.onsuccess&&this._options.onsuccess(n)):(this.__files[t].status=c,this._options.hasOwnProperty("onerror")&&"function"==typeof this._options.onerror&&this._options.onsuccess(n)))}.bind(e),i.append("file",e.__files[t].file),e._options.hasOwnProperty("data"))for(var d in e._options.data)e._options.data.hasOwnProperty(d)&&i.append(d,e._options.data[d]);n.open("POST",e._options.url,!0),n.send(i)};for(var n in this.__files){t(n)}}},{key:"__toggleUploadBtn",value:function(e){this.$do.classList[e?"remove":"add"]("disable")}}]),e}();e.exports=f},function(e,t){}]);