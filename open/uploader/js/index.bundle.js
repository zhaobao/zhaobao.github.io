!function(e){function t(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.charset="utf-8",n.src=p.p+""+e+"."+b+".hot-update.js",t.appendChild(n)}function n(e){if("undefined"==typeof XMLHttpRequest)return e(new Error("No browser support"));try{var t=new XMLHttpRequest,n=p.p+""+b+".hot-update.json";t.open("GET",n,!0),t.timeout=1e4,t.send(null)}catch(r){return e(r)}t.onreadystatechange=function(){if(4===t.readyState)if(0===t.status)e(new Error("Manifest request to "+n+" timed out."));else if(404===t.status)e();else if(200!==t.status&&304!==t.status)e(new Error("Manifest request to "+n+" failed."));else{try{var r=JSON.parse(t.responseText)}catch(i){return void e(i)}e(null,r)}}}function r(e){function t(e,t){"ready"===$&&o("prepare"),E++,p.e(e,function(){function n(){E--,"prepare"===$&&(H[e]||c(e),0===E&&0===S&&u())}try{t.call(null,r)}finally{n()}})}var n=L[e];if(!n)return p;var r=function(t){return n.hot.active?L[t]?(L[t].parents.indexOf(e)<0&&L[t].parents.push(e),n.children.indexOf(t)<0&&n.children.push(t)):O=[e]:(console.warn("[HMR] unexpected require("+t+") from disposed module "+e),O=[]),p(t)};for(var i in p)Object.prototype.hasOwnProperty.call(p,i)&&(h?Object.defineProperty(r,i,function(e){return{configurable:!0,enumerable:!0,get:function(){return p[e]},set:function(t){p[e]=t}}}(i)):r[i]=p[i]);return h?Object.defineProperty(r,"e",{enumerable:!0,value:t}):r.e=t,r}function i(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],active:!0,accept:function(e,n){if("undefined"==typeof e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._acceptedDependencies[e[r]]=n;else t._acceptedDependencies[e]=n},decline:function(e){if("undefined"==typeof e)t._selfDeclined=!0;else if("number"==typeof e)t._declinedDependencies[e]=!0;else for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:a,apply:d,status:function(e){return e?void P.push(e):$},addStatusHandler:function(e){P.push(e)},removeStatusHandler:function(e){var t=P.indexOf(e);t>=0&&P.splice(t,1)},data:w[e]};return t}function o(e){$=e;for(var t=0;t<P.length;t++)P[t].call(null,e)}function s(e){var t=+e+""===e;return t?+e:e}function a(e,t){if("idle"!==$)throw new Error("check() is only allowed in idle status");"function"==typeof e?(g=!1,t=e):(g=e,t=t||function(e){if(e)throw e}),o("check"),n(function(e,n){if(e)return t(e);if(!n)return o("idle"),void t(null,null);k={},x={},H={};for(var r=0;r<n.c.length;r++)x[n.c[r]]=!0;m=n.h,o("prepare"),v=t,y={};var i=0;c(i),"prepare"===$&&0===E&&0===S&&u()})}function l(e,t){if(x[e]&&k[e]){k[e]=!1;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(y[n]=t[n]);0===--S&&0===E&&u()}}function c(e){x[e]?(k[e]=!0,S++,t(e)):H[e]=!0}function u(){o("ready");var e=v;if(v=null,e)if(g)d(g,e);else{var t=[];for(var n in y)Object.prototype.hasOwnProperty.call(y,n)&&t.push(s(n));e(null,t)}}function d(t,n){function r(e){for(var t=[e],n={},r=t.slice();r.length>0;){var o=r.pop(),e=L[o];if(e&&!e.hot._selfAccepted){if(e.hot._selfDeclined)return new Error("Aborted because of self decline: "+o);if(0===o)return;for(var s=0;s<e.parents.length;s++){var a=e.parents[s],l=L[a];if(l.hot._declinedDependencies[o])return new Error("Aborted because of declined dependency: "+o+" in "+a);t.indexOf(a)>=0||(l.hot._acceptedDependencies[o]?(n[a]||(n[a]=[]),i(n[a],[o])):(delete n[a],t.push(a),r.push(a)))}}}return[t,n]}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.indexOf(r)<0&&e.push(r)}}if("ready"!==$)throw new Error("apply() is only allowed in ready status");"function"==typeof t?(n=t,t={}):t&&"object"==typeof t?n=n||function(e){if(e)throw e}:(t={},n=n||function(e){if(e)throw e});var a={},l=[],c={};for(var u in y)if(Object.prototype.hasOwnProperty.call(y,u)){var d=s(u),f=r(d);if(!f){if(t.ignoreUnaccepted)continue;return o("abort"),n(new Error("Aborted because "+d+" is not accepted"))}if(f instanceof Error)return o("abort"),n(f);c[d]=y[d],i(l,f[0]);for(var d in f[1])Object.prototype.hasOwnProperty.call(f[1],d)&&(a[d]||(a[d]=[]),i(a[d],f[1][d]))}for(var h=[],_=0;_<l.length;_++){var d=l[_];L[d]&&L[d].hot._selfAccepted&&h.push({module:d,errorHandler:L[d].hot._selfAccepted})}o("dispose");for(var v=l.slice();v.length>0;){var d=v.pop(),g=L[d];if(g){for(var P={},S=g.hot._disposeHandlers,E=0;E<S.length;E++){var H=S[E];H(P)}w[d]=P,g.hot.active=!1,delete L[d];for(var E=0;E<g.children.length;E++){var k=L[g.children[E]];if(k){var x=k.parents.indexOf(d);x>=0&&k.parents.splice(x,1)}}}}for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d))for(var g=L[d],j=a[d],E=0;E<j.length;E++){var q=j[E],x=g.children.indexOf(q);x>=0&&g.children.splice(x,1)}o("apply"),b=m;for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(e[d]=c[d]);var D=null;for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d)){for(var g=L[d],j=a[d],U=[],_=0;_<j.length;_++){var q=j[_],H=g.hot._acceptedDependencies[q];U.indexOf(H)>=0||U.push(H)}for(var _=0;_<U.length;_++){var H=U[_];try{H(a)}catch(A){D||(D=A)}}}for(var _=0;_<h.length;_++){var M=h[_],d=M.module;O=[d];try{p(d)}catch(A){if("function"==typeof M.errorHandler)try{M.errorHandler(A)}catch(A){D||(D=A)}else D||(D=A)}}return D?(o("fail"),n(D)):(o("idle"),void n(null,l))}function p(t){if(L[t])return L[t].exports;var n=L[t]={exports:{},id:t,loaded:!1,hot:i(t),parents:O,children:[]};return e[t].call(n.exports,n,n.exports,r(t)),n.loaded=!0,n.exports}var f=this.webpackHotUpdate;this.webpackHotUpdate=function(e,t){l(e,t),f&&f(e,t)};var h=!1;try{Object.defineProperty({},"x",{get:function(){}}),h=!0}catch(_){}var v,y,m,g=!0,b="2b9c1f3c4b8648c161fd",w={},O=[],P=[],$="idle",S=0,E=0,H={},k={},x={},L={};return p.m=e,p.c=L,p.p="",p.h=function(){return b},r(0)(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";var r=n(2);new r(".upload-container",{url:"http://127.0.0.1:9999",data:{},multiple:!0,onprepare:function(){console.log(arguments)},onsuccess:function(){console.log(arguments)},onerror:function(){console.log(arguments)}})["do"]()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(3);var s=1,a=2,l=3,c=4,u=function h(e){r(this,h),this.url=e.hasOwnProperty("url")?e.url:"",this.accept=e.hasOwnProperty("accept")?e.accept:"*/*",this.multiple=e.hasOwnProperty("multiple")?"multiple":"",this.data=e.hasOwnProperty("data")?e.data:{},this.onprepare=e.hasOwnProperty("onprepare")?e.onprepare:function(){},this.onsuccess=e.hasOwnProperty("onsuccess")?e.onsuccess:function(){},this.onerror=e.hasOwnProperty("onerror")?e.onerror:function(){}},d=function(){function e(){r(this,e)}return o(e,null,[{key:"getSuffix",value:function(e){return""!==e.type?e.type.split("/")[1].toUpperCase().substr(0,4):e.name.lastIndexOf(".")>=0?e.name.substring(e.name.lastIndexOf(".")+1).toUpperCase().substr(0,4):void 0}},{key:"isEmptyObject",value:function(e){if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;if("object"!==("undefined"==typeof e?"undefined":i(e)))return!0;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"getUuid",value:function(){return++e.uuid}}]),e}();d.uuid=0;var p=function(){function e(){r(this,e)}return o(e,null,[{key:"getContainer",value:function(){return'\n            <div class="upload">\n                <div class="upload__header">\n                    <div class="upload__title">FILE UPLOAD</div>\n                    <div class="upload__close">╳</div>\n                </div>\n                <div class="upload__body"></div>\n                <div class="upload__footer">\n                    <div class="upload__drag">\n                        <div class="upload__area">\n                            <!--<span>Drag files here or</span>-->\n                            <span class="upload-area__browse">Click to browse</span>\n                        </div>\n                    </div>\n                    <div class="upload__do disable">☂</div>\n                </div>\n                <div class="upload__form hide"></div>\n            </div>'}},{key:"getItem",value:function(e,t,n,r){var i=document.createElement("div");return i.classList.add("upload-item"),i.classList.add("upload-item-"+r),i.innerHTML='\n            <div class="upload-item__icon">'+e+'</div>\n            <div class="upload-item__body">\n                <div class="upload-item__info">\n                    <div class="upload-item__name">'+t+'</div>\n                    <div class="upload-item__status">'+n+'</div>\n                    <div class="upload-item__result" data-target="'+r+'">╳</div>\n                </div>\n                <div class="upload-item__pg">\n                    <div class="upload-item-pg-bg"></div>\n                    <div class="upload-item-pg-hl"></div>\n                </div>\n            </div>',i}},{key:"getHiddenForm",value:function(e,t){return'<input type="file" accept="'+e+'" class="upload__input" '+t+"/>"}}]),e}(),f=function(){function e(t,n){r(this,e),this.$container="string"==typeof t?document.querySelector(t):t,this._options=new u(n),this.__files={}}return o(e,[{key:"do",value:function(){return this.$container.style.minHeight="160px",this.$container.innerHTML=p.getContainer(),this.$upload=this.$container.querySelector(".upload"),this.$form=this.$upload.querySelector(".upload__form"),this.$form.innerHTML=p.getHiddenForm(this._options.accept,this._options.multiple),this.__cacheSelector(),this.__bindEvent(),this}},{key:"__cacheSelector",value:function(){this.$body=this.$upload.querySelector(".upload__body"),this.$close=this.$upload.querySelector(".upload__close"),this.$drag=this.$upload.querySelector(".upload__drag"),this.$do=this.$upload.querySelector(".upload__do"),this.$input=this.$upload.querySelector(".upload__input")}},{key:"__bindEvent",value:function(){this.$close.addEventListener("click",function(){this.$container.parentNode.removeChild(this.$container)}.bind(this),!1),this.$drag.addEventListener("click",function(){this.$input.click()}.bind(this),!1),this.$input.addEventListener("change",function(e){this.__generateItem(e.target.files),e.target.value=""}.bind(this),!1),this.$do.addEventListener("click",function(e){d.isEmptyObject(this.__files)||this.__doUpload()}.bind(this),!1),this.$body.addEventListener("click",function(e){if(console.log(this.__files),console.log(e.target),e.target.classList.contains("upload-item__result")){var t=e.target.getAttribute("data-target");this.__files.hasOwnProperty("item-"+t)&&delete this.__files["item-"+t],d.isEmptyObject(this.__files)&&this.__toggleUploadBtn(!1),this.$body.removeChild(document.querySelector(".upload-item-"+t))}}.bind(this),!1)}},{key:"__generateItem",value:function(e){if(0!==e.length){this.__toggleUploadBtn(!0);for(var t=0,n=e.length;t<n;t++){var r=e[t],i=d.getUuid();this.$body.appendChild(p.getItem(d.getSuffix(r),r.name,r.size,i)),this.__files["item-"+i]={status:s,file:r,container:document.querySelector(".upload-item-"+i)}}}}},{key:"__doUpload",value:function(){var e=this,t=function(t){if(!e.__files.hasOwnProperty(t))return"continue";if(e._options.hasOwnProperty("onprepare")&&"function"==typeof e._options.onprepare&&e._options.onprepare(e.__files[t]),e.__files[t].status!==s)return"continue";e.__files[t].status=a;var n=new XMLHttpRequest,r=new FormData,i=e.__files[t].container.querySelector(".upload-item-pg-hl"),o=e.__files[t].container.querySelector(".upload-item__status"),u=e.__files[t].container.querySelector(".upload-item__result").getAttribute("data-target");if(n.upload.addEventListener("progress",function(e){if(e.lengthComputable){var n=this.__files[t].file.size,r=e.loaded;r>n&&(r=n);var s=Math.round(100*r/n);i.style.width=s+"%",o.innerHTML=r+" / "+n}else i.classList.add("unknown")}.bind(e),!1),n.upload.addEventListener("load",function(){i.style.width="100%"},!1),n.onreadystatechange=function(){4==n.readyState&&(200==n.status?(this.__files[t].status=l,o.innerHTML="success",o.classList.add("upload-item__status-success"),delete this.__files["item-"+u],this._options.hasOwnProperty("onsuccess")&&"function"==typeof this._options.onsuccess&&this._options.onsuccess(n)):(this.__files[t].status=c,this._options.hasOwnProperty("onerror")&&"function"==typeof this._options.onerror&&this._options.onsuccess(n)))}.bind(e),r.append("file",e.__files[t].file),e._options.hasOwnProperty("data"))for(var d in e._options.data)e._options.data.hasOwnProperty(d)&&r.append(d,e._options.data[d]);n.open("POST",e._options.url,!0),n.send(r)};for(var n in this.__files){t(n)}}},{key:"__toggleUploadBtn",value:function(e){this.$do.classList[e?"remove":"add"]("disable")}}]),e}();e.exports=f},function(e,t){}]);